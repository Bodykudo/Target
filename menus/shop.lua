function ts.shop(n)
	close(n)
    ui.addMenu(2,"",n,221,61,346,266,true)
    ui.addButton(10,text[n].pre,p[n].shopPage==1 and "Random" or n,242,299,72,22,true,"preShop")
    ui.addButton(13,text[n].next,p[n].shopPage==#balls/3 and "Random" or n,474,299,72,22,true,"nextShop")
    ui.addButton(16,"<R>"..text[n].close,n,333,299,122,22,true,"close")
    --ui.addTextArea(28,p[n].shopPage==1 and "<p align='center'><font size='10'>"..string.format(text[n].quests[balls[p[n].sub[1]].text],p[n].sub[1]) or "<p align='center'><font size='10'>"..string.format(text[n].quests[balls[p[n].sub[1]].text],data[n][balls[p[n].sub[1]].type],balls[p[n].sub[1]].req),n,302, 90, 180, 40, 0x47707d, 0x000000, 1, true)
    --ui.addTextArea(30,p[n].shopPage==1 and "<p align='center'><font size='10'>"..string.format(text[n].quests[balls[p[n].sub[1]].text],p[n].sub[2]) or "<p align='center'><font size='10'>"..string.format(text[n].quests[balls[p[n].sub[2]].text],data[n][balls[p[n].sub[2]].type],balls[p[n].sub[2]].req),n,302, 165, 180, 40, 0x47707d, 0x000000, 1, true)
    --ui.addTextArea(29,p[n].shopPage==1 and "<p align='center'><font size='10'>"..string.format(text[n].quests[balls[p[n].sub[1]].text],p[n].sub[3]) or "<p align='center'><font size='10'>"..string.format(text[n].quests[balls[p[n].sub[3]].text],data[n][balls[p[n].sub[3]].type],balls[p[n].sub[3]].req),n,302, 240, 180, 40, 0x47707d, 0x000000, 1, true)
    ui.addTextArea(28,"<p align='center'><font size='10'>"..string.format(text[n].quests[balls[p[n].sub[1]].text],data[n][balls[p[n].sub[1]].type],balls[p[n].sub[1]].req),n,302, 90, 180, 40, 0x47707d, 0x000000, 1, true)
    ui.addTextArea(30,"<p align='center'><font size='10'>"..string.format(text[n].quests[balls[p[n].sub[2]].text],data[n][balls[p[n].sub[2]].type],balls[p[n].sub[2]].req),n,302, 165, 180, 40, 0x47707d, 0x000000, 1, true)
    ui.addTextArea(29,"<p align='center'><font size='10'>"..string.format(text[n].quests[balls[p[n].sub[3]].text],data[n][balls[p[n].sub[3]].type],balls[p[n].sub[3]].req),n,302, 240, 180, 40, 0x47707d, 0x000000, 1, true)
    ui.addTextArea(19,"",n,235,85,60, 50, 0x47707d, 0x000000, 1, true)
    ui.addTextArea(21,"",n,235,160,60,50, 0x47707d, 0x000000, 1, true)
	ui.addTextArea(20,"",n,235,235,60, 50, 0x47707d, 0x000000, 1, true)
	if n~="Bodykudo#0000" then
    	--ui.addButton(22,p[n].shopPage==1 and (n==lb_gbPl[1] and text[n].enabled or text[n].disabled) or data[n][balls[p[n].sub[1]].type] >= balls[p[n].sub[1]].req and text[n].enabled or text[n].disabled,n,489,92,72,22,true)
    	--ui.addButton(24,p[n].shopPage==1 and (n==lb_gbPl[2] and text[n].enabled or text[n].disabled) or data[n][balls[p[n].sub[2]].type] >= balls[p[n].sub[2]].req and text[n].enabled or text[n].disabled,n,489,167,72,22,true)
    	--ui.addButton(26,p[n].shopPage==1 and (n==lb_gbPl[3] and text[n].enabled or text[n].disabled) or data[n][balls[p[n].sub[3]].type] >= balls[p[n].sub[3]].req and text[n].enabled or text[n].disabled,n,489,242,72,22,true)
		ui.addButton(22,n==balls[p[n].sub[1]].artist and text[n].enabled or (data[n][balls[p[n].sub[1]].type] >= balls[p[n].sub[1]].req and text[n].enabled or text[n].disabled),n,489,92,72,22,true)
    	ui.addButton(24,n==balls[p[n].sub[2]].artist and text[n].enabled or (data[n][balls[p[n].sub[2]].type] >= balls[p[n].sub[2]].req and text[n].enabled or text[n].disabled),n,489,167,72,22,true)
    	ui.addButton(26,n==balls[p[n].sub[3]].artist and text[n].enabled or (data[n][balls[p[n].sub[3]].type] >= balls[p[n].sub[3]].req and text[n].enabled or text[n].disabled),n,489,242,72,22,true)
	else
    	ui.addButton(22,text[n].enabled,n,489,92,72,22,true)
    	ui.addButton(24,text[n].enabled,n,489,167,72,22,true)
    	ui.addButton(26,text[n].enabled,n,489,242,72,22,true)
	end
	id.lb[1][n]=tfm.exec.addImage(balls[p[n].sub[1]].img..".png","&10",235+(balls[p[n].sub[1]].xs or 15),85+(balls[p[n].sub[1]].ys or 10),n)
	id.lb[2][n]=tfm.exec.addImage(balls[p[n].sub[2]].img..".png","&11",235+(balls[p[n].sub[2]].xs or 15),160+(balls[p[n].sub[2]].ys or 10),n)
	id.lb[3][n]=tfm.exec.addImage(balls[p[n].sub[3]].img..".png","&12",235+(balls[p[n].sub[3]].xs or 15),235+(balls[p[n].sub[3]].ys or 10),n)
end